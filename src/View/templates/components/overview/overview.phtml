<div class="table-responsive">
    <table class="table table-striped table-hover table-bordered table-sm ">
        <thead class="bg-light">
        <tr>
            <?php $previousChapter = null ?>
            <?php $index = 1 ?>
            <?php $count = count($fields) ?>
            <?php foreach ($fields as $key => $field): ?>
                <?php if ($field->getChapter() == $previousChapter && $field->getChapter() != ''): ?>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <?php elseif ($previousChapter == null): ?>
                    <td>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <?php else: ?>
                    </td>
                    <td>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <?php endif; ?>
                <?php if ($index == $count): ?>
                    </td>
                <?php endif; ?>
                <?php $previousChapter = $field->getChapter() ?>
                <?php $index++; ?>
            <?php endforeach ?>
        </tr>
        </thead>
        <tbody>
        <?php foreach ($model->getComponentDataBeanList() as $bean): ?>
            <tr>
                <?php $previousChapter = null ?>
                <?php $index = 1 ?>
                <?php $count = count($fields) ?>
                <?php foreach ($fields as $field): ?>
                    <?php if ($field->getChapter() == $previousChapter && $field->getChapter() != ''): ?>
                        <?php if ($field->isShow($bean)): ?>
                            <?php $this->insert($templateFolder . '::' . $field->getTemplate(), ['templateFolder' => $templateFolder, 'field' => $field, 'data' => $bean]) ?>
                        <?php endif; ?><?php elseif ($previousChapter == null): ?>
                        <td class="align-middle" <?= $field->hasWidth() ? 'style="width: ' . $field->getWidth() . 'px"' : '' ?>>
                        <?php if ($field->isShow($bean)): ?>
                            <?php $this->insert($templateFolder . '::' . $field->getTemplate(), ['templateFolder' => $templateFolder, 'field' => $field, 'data' => $bean]) ?>
                        <?php endif; ?>
                    <?php else: ?>
                        </td>
                        <td class="align-middle" <?= $field->hasWidth() ? 'style="width: ' . $field->getWidth() . 'px"' : '' ?>>
                        <?php if ($field->isShow($bean)): ?>
                            <?php $this->insert($templateFolder . '::' . $field->getTemplate(), ['templateFolder' => $templateFolder, 'field' => $field, 'data' => $bean]) ?>
                        <?php endif; ?>
                    <?php endif; ?>
                    <?php if ($index == $count): ?>
                        </td>
                    <?php endif; ?>
                    <?php $previousChapter = $field->getChapter() ?>
                    <?php $index++; ?>
                <?php endforeach ?>
            </tr>
        <?php endforeach ?>
        </tbody>
    </table>
</div>
<?php if ($model->hasPageNavigation()):?>
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-end">
        <li class="page-item <?= $model->getPageNavigation()->isFirst() ? ' disabled' : ''?>">
            <a class="page-link" href="<?=$model->getPageNavigation()->getPrevious()->getLink()?>" aria-label="Previous" <?= $model->getPageNavigation()->isFirst() ? ' tabindex="-1"' : ''?>>
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        <?php foreach ($model->getPageNavigation()->getElementList() as $key => $element): ?>
            <li class="page-item <?=$model->getPageNavigation()->getActive() == $key ? 'active' : ''?>"><a class="page-link" href="<?=$element->getLink()?>"><?=$key+1?></a></li>
        <?php endforeach;?>
        <li class="page-item <?= $model->getPageNavigation()->isLast() ? ' disabled' : ''?>">
            <a class="page-link" href="<?=$model->getPageNavigation()->getNext()->getLink()?>" aria-label="Next" <?= $model->getPageNavigation()->isLast() ? ' tabindex="-1"' : ''?>>
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
    </ul>
</nav>
<?php endif;?>
