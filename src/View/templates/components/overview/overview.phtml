<?
/**
 * @var $component \Mvc\View\Components\Overview\Overview
 * @var $templateFolder string
 */
?>
<div class="table-responsive">
    <table class="table table-striped table-hover table-bordered table-sm ">
        <thead class="bg-light">
        <tr>
            <? $previousChapter = null ?>
            <? $index = 1 ?>
            <? $count = count($component->getFieldList()) ?>
            <? foreach ($component->getFieldList() as $key => $field): ?>
                <? if ($field->getChapter() == $previousChapter && $field->getChapter() != ''): ?>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <? elseif ($previousChapter == null): ?>
                    <td>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <? else: ?>
                    </td>
                    <td>
                    <?= $field->hasTitle() ? $field->getTitle() : '' ?>
                <? endif; ?>
                <? if ($index == $count): ?>
                    </td>
                <? endif; ?>
                <? $previousChapter = $field->getChapter() ?>
                <? $index++; ?>
            <? endforeach ?>
        </tr>
        </thead>
        <tbody>
        <? foreach ($component->getBeanList() as $bean): ?>
            <tr>
                <? $previousChapter = null ?>
                <? $index = 1 ?>
                <? $count = count($component->getFieldList()) ?>
                <? foreach ($component->getFieldList() as $field): ?>
                    <? if ($field->getChapter() == $previousChapter && $field->getChapter() != ''): ?>
                        <? if ($field->isShow($bean)): ?>
                            <? $this->insert($templateFolder . '::' . $field->getTemplate(), ['field' => $field, 'bean' => $bean]) ?>
                        <? endif; ?><? elseif ($previousChapter == null): ?>
                        <td class="align-middle" <?= $field->hasWidth() ? 'style="width: ' . $field->getWidth() . 'px"' : '' ?>>
                        <? if ($field->isShow($bean)): ?>
                            <? $this->insert($templateFolder . '::' . $field->getTemplate(), ['field' => $field, 'bean' => $bean]) ?>
                        <? endif; ?>
                    <? else: ?>
                        </td>
                        <td class="align-middle" <?= $field->hasWidth() ? 'style="width: ' . $field->getWidth() . 'px"' : '' ?>>
                        <? if ($field->isShow($bean)): ?>
                            <? $this->insert($templateFolder . '::' . $field->getTemplate(), ['field' => $field, 'bean' => $bean]) ?>
                        <? endif; ?>
                    <? endif; ?>
                    <? if ($index == $count): ?>
                        </td>
                    <? endif; ?>
                    <? $previousChapter = $field->getChapter() ?>
                    <? $index++; ?>
                <? endforeach ?>
            </tr>
        <? endforeach ?>
        </tbody>
    </table>
</div>
